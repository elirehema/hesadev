(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{1183:function(e,t,r){"use strict";r.r(t);r(20),r(12),r(27),r(14),r(28);var n=r(1),d=(r(67),r(68),r(178),r(8),r(53),r(135),r(111),r(19),r(127),r(177));function l(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function o(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var c={title:"Products",data:function(){var e;return e={item:1,alert:!0,headers:[{text:"Image",align:"start",value:"image"},{text:"Product Name",value:"name"},{text:"Category",value:"parentCategory"},{text:"Sub Category",value:"category"},{text:"Supplier",value:"supplier"},{text:"Primary Unit",value:"primaryUnit"},{text:"Secondary Unit",value:"secondaryUnit"},{text:"Status",value:"status"},{text:"Action",value:"actions",sortable:!1,class:"thright",align:"right"}],tab:null,search:null,pageCount:0,valid:!0,dialog:!1},Object(n.a)(e,"item",""),Object(n.a)(e,"editedItem",{name:"",categoryId:"",parentCategoryId:"",description:"",image:"",primaryUnit:"",primaryUnitPrice:0,secondaryUnit:"None",secondaryUnitPrice:0,discountPercentage:0,supplierId:"",discountAmount:0}),Object(n.a)(e,"defaultItem",{name:"",categoryId:"",parentCategoryId:"",description:"",image:"",primaryUnit:"",supplierId:"",primaryUnitPrice:0,secondaryUnit:"None",secondaryUnitPrice:0,discountPercentage:0,discountAmount:0}),Object(n.a)(e,"fileName",""),Object(n.a)(e,"file",""),Object(n.a)(e,"category",""),Object(n.a)(e,"editedIndex",-1),Object(n.a)(e,"way","deleteProduct"),e},created:function(){this.fetchProducts(),this.fetchSuppliers(),this.$store.dispatch("fetchCategoriesForm")},computed:o(o({},Object(d.c)(["categories","allProducts","suppliers"])),{},{formTitle:function(){return-1===this.editedIndex?"Create new Product":"".concat(this.edit?"Edit":"View"," ").concat(this.editedItem.name)},text:function(){return"ACTIVE"==this.editedItem.status?"Deactivate ":"Activate "},perpage:function(){var e=parseInt(this.itemsperpage,10);return isNaN(e)?20:e},subcat:function(){var e=this;if(""!=this.editedItem.parentCategoryId)return this.categories.find((function(t){return t.id==e.editedItem.parentCategoryId})).subCategories}}),methods:o(o({},Object(d.b)(["addProduct","fetchProducts","fetchCategoriesForm","deleteProduct","editProduct","fetchSuppliers"])),{},{previewFiles:function(e){this.fileName="",this.file=e.target.files[0],this.file&&"image"===this.file.type.split("/")[0]?this.fileName=this.file.name:this.fileName="Unsupported File!"},refresh_product_state:function(){console.log("refresh state"),this.$store.dispatch("fetchProducts")},editItem:function(e){this.editedIndex=this.allProducts.indexOf(e),this.editedItem=Object.assign({},e),this.dialog=!0},close:function(){var e=this;setTimeout((function(){e.refresh_product_state(),console.log("Call emit")}),this.delay_seconds),this.dialog=!1,this.edit=!1,this.$nextTick((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}))},save:function(){var e=this,t=new FormData;""!=this.file&&t.append("img",this.file),t.append("name",this.editedItem.name),t.append("description",this.editedItem.description),t.append("categoryId",this.editedItem.categoryId),t.append("supplierId",this.editedItem.supplierId),t.append("primaryUnit",this.editedItem.primaryUnit),t.append("primaryUnitPrice",this.editedItem.primaryUnitPrice),t.append("secondaryUnit",this.editedItem.secondaryUnit),t.append("secondaryUnitPrice",this.editedItem.secondaryUnitPrice),this.editedIndex>-1?(t.append("id",this.editedItem.id),this.editProduct(t).then((function(){e.fetchProducts()}))):this.addProduct(t).then((function(){e.fetchProducts()})),this.close()}}),watch:{dialog:function(e){e||this.close()}}},m=r(153),v=r(228),f=r.n(v),h=r(423),y=r(993),I=r(1022),_=r(996),x=r(995),C=r(985),P=r(994),U=r(1170),D=r(1010),w=r(424),k=r(1028),O=r(249),j=r(384),$=r(1005),S=r(976),F=r(991),V=r(227),component=Object(m.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"pt-8"},[r("v-container",{attrs:{fluid:""}},[r("div",{staticClass:"lighter-background"},[r("v-data-table",{attrs:{headers:e.headers,items:e.allProducts,search:e.search,"items-per-page":e.itemsperpage,"footer-props":e.footerprops,"header-props":e.headerprops,"mobile-breakpoint":e.mbp},on:{"page-count":function(t){e.pageCount=t}},scopedSlots:e._u([{key:"top",fn:function(){return[r("v-container",{attrs:{fluid:""}},[r("v-row",{attrs:{"no-gutters":""}},[r("v-col",{staticClass:"d-flex align-center",attrs:{cols:"12",sm:"12",md:"2"}},[r("p",{staticClass:"text-h6"},[e._v(e._s(e.$t("label.title.products")))])]),e._v(" "),r("v-spacer"),e._v(" "),r("v-col",{staticClass:"d-flex justify-end mr-2",attrs:{cols:"12",sm:"12",md:"3"}},[r("v-text-field",{attrs:{placeholder:"Search","prepend-inner-icon":e.mdiMagnify,dense:"","hide-details":"",color:"#ed1e65",outlined:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e._v(" "),r("v-col",{staticClass:"d-flex justify-end",attrs:{cols:"12",sm:"12",md:"2"}},[r("v-dialog",{attrs:{width:e.isLaptop?"50%":"100%",transition:"scale-transition",origin:"center center"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,d=t.attrs;return[r("v-btn",e._g(e._b({class:e.isTablet?"white--text":"mt-2 white--text",attrs:{color:"primary",block:e.$vuetify.breakpoint.smAndDown},on:{click:function(t){e.edit=!0}}},"v-btn",d,!1),n),[e._v("\n                        + "+e._s(e.$t("label.button.addproduct"))+"\n                      ")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[e._v(" "),r("v-card",[r("v-container",[r("v-form",{staticClass:"py-3 px-4",on:{submit:function(t){return t.preventDefault(),e.save.apply(null,arguments)}},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[r("div",{staticClass:"py-sm-0 py-md-2 px-sm-0 px-md-4"},[r("v-row",{attrs:{"no-gutters":""}},[r("v-col",{attrs:{cols:"12",sm:"12",md:"4",lg:"4"}},[r("span",{staticClass:"text-h6"},[e._v(" "+e._s(e.formTitle))]),e._v(" "),e.$vuetify.breakpoint.smAndDown?r("v-divider",{staticClass:"my-3"}):e._e()],1),e._v(" "),r("v-col",{staticClass:"d-md-flex d-flex-sm-wrap justify-end align-sm-start justify-sm-start justify-md-end ",attrs:{cols:"12",sm:"12",md:"8",lg:"8"}},[r("v-btn",{staticClass:"line-background text-white mx-1",attrs:{small:"",color:"primary"},on:{click:function(t){e.edit=!e.edit}}},[e._v("\n                                 "+e._s(e.edit?e.$t("label.button.view"):e.$t("label.button.edit"))+"\n                                ")]),e._v(" "),-1==e.editedIndex?r("v-btn",{staticClass:"border-theme outlined mx-1",attrs:{small:""},on:{click:e.close}},[e._v("\n                                Cancel\n                              ")]):e._e(),e._v(" "),e.editedIndex>-1?r("delete",{staticClass:"mx-1",attrs:{form:e.editedItem.id,text:e.text,methods:e.way,action:"fetchProducts"}}):e._e(),e._v(" "),e.editedIndex>-1?r("v-btn",{staticClass:"mx-1",attrs:{title:"Close",color:"primary",outlined:"",small:""},on:{click:e.close}},[e._v("\n                                "+e._s(e.$t("label.button.cancel"))+"\n                              ")]):e._e(),e._v(" "),r("v-btn",{staticClass:"line-background text-white mx-1",attrs:{disabled:!e.valid,type:"submit",small:""}},[e._v("\n                                "+e._s(e.$t("label.button.save"))+"\n                              ")])],1)],1)],1),e._v(" "),r("v-card-text",{staticClass:"px-0"},[r("v-container",{attrs:{fluid:""}},[r("v-row",[r("v-col",{attrs:{cols:"12",sm:"4",md:"4"}},[r("v-text-field",{attrs:{label:"Prooduct name",placeholder:"Product Name",dense:"",outlined:"",color:"#C7D3DD",rules:[function(e){return!!e||"Field is required"}],disabled:!e.edit,required:""},model:{value:e.editedItem.name,callback:function(t){e.$set(e.editedItem,"name",t)},expression:"editedItem.name"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",sm:"4",md:"4"}},[r("v-select",{attrs:{items:e.categories,"menu-props":"auto","item-text":"name",outlined:"",clearable:"",dense:"",color:"#C7D3DD","item-value":"id",label:"Select category",placeholder:"Select category","hide-details":"",rules:[function(e){return!!e||"Field is required"}],disabled:!e.edit,required:"","single-line":""},model:{value:e.editedItem.parentCategoryId,callback:function(t){e.$set(e.editedItem,"parentCategoryId",t)},expression:"editedItem.parentCategoryId"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",sm:"4",md:"4"}},[r("v-select",{attrs:{items:e.subcat,"menu-props":"auto","item-text":"name",outlined:"",clearable:"",dense:"",color:"#C7D3DD","item-value":"id",label:"Sub category",placeholder:"Select sub-category","hide-details":"",rules:[function(e){return!!e||"Field is required"}],disabled:!e.edit,required:"","single-line":""},model:{value:e.editedItem.categoryId,callback:function(t){e.$set(e.editedItem,"categoryId",t)},expression:"editedItem.categoryId"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("label",[e._v("Picture")]),e._v(" "),r("div",{staticClass:"form__group field"},[r("div",{staticClass:"btn btn-upload"},[r("span",[e._v("Choose File")])]),e._v(" "),e.fileName?r("span",{staticClass:"pl-2"},[e._v("\n                                      "+e._s(e.fileName)+"\n                                    ")]):e._e(),e._v(" "),r("input",{attrs:{type:"file",disabled:!e.edit,accept:"image/*"},on:{change:e.previewFiles}})])]),e._v(" "),r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-text-field",{attrs:{label:"Descriptions",placeholder:"Enter Description",dense:"",outlined:"",color:"#C7D3DD",rules:[function(e){return!!e||"Field is required"}],disabled:!e.edit,required:""},model:{value:e.editedItem.description,callback:function(t){e.$set(e.editedItem,"description",t)},expression:"editedItem.description"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[r("v-select",{attrs:{items:e.units,outlined:"","menu-props":"auto",label:"Primary unit",placeholder:"Enter Primary Unit","hide-details":"",rules:[function(e){return!!e||"Field is required"}],disabled:!e.edit,required:"",clearable:"",dense:"",color:"#C7D3DD","single-line":""},on:{focus:function(t){return e.$store.dispatch("_getproductunits")}},model:{value:e.editedItem.primaryUnit,callback:function(t){e.$set(e.editedItem,"primaryUnit",t)},expression:"editedItem.primaryUnit"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[r("v-text-field",{attrs:{label:"Price",placeholder:"Enter Primary Unit Price",dense:"",outlined:"",type:"number",color:"#C7D3DD",rules:[function(e){return!!e||"Field is required"}],disabled:!e.edit,required:""},model:{value:e.editedItem.primaryUnitPrice,callback:function(t){e.$set(e.editedItem,"primaryUnitPrice",t)},expression:"editedItem.primaryUnitPrice"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-card",{staticClass:"pt-2 px-1",attrs:{color:"#FFE0B2"}},[r("v-row",[r("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[r("v-select",{attrs:{items:e.units,outlined:"",clearable:"","menu-props":"auto",label:"Secondary unit",placeholder:"Enter Secondary Unit","hide-details":"",rules:[function(e){return!!e||"Field is required"}],required:"",dense:"",disabled:!e.edit,color:"#C7D3DD","single-line":""},on:{focus:function(t){return e.$store.dispatch("_getproductunits")}},model:{value:e.editedItem.secondaryUnit,callback:function(t){e.$set(e.editedItem,"secondaryUnit",t)},expression:"editedItem.secondaryUnit"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[r("v-text-field",{attrs:{label:"Price",placeholder:"Enter secondary unit price",dense:"",disabled:!e.edit,type:"number",outlined:"",color:"#C7D3DD"},model:{value:e.editedItem.secondaryUnitPrice,callback:function(t){e.$set(e.editedItem,"secondaryUnitPrice",t)},expression:"\n                                            editedItem.secondaryUnitPrice\n                                          "}})],1)],1)],1)],1),e._v(" "),r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-select",{attrs:{items:e.suppliers,outlined:"","menu-props":"auto","item-text":"name","item-value":"id",chips:"",label:"Supplier",placeholder:"Select supplier name","hide-details":"",rules:[function(e){return!!e||"Field is required"}],disabled:!e.edit,required:"",clearable:"",dense:"",color:"#C7D3DD","single-line":""},model:{value:e.editedItem.supplierId,callback:function(t){e.$set(e.editedItem,"supplierId",t)},expression:"editedItem.supplierId"}})],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)]},proxy:!0},{key:"item.image",fn:function(e){var t=e.item;return[r("v-avatar",{attrs:{size:"56"}},[r("v-img",{attrs:{src:t.image}})],1)]}},{key:"item.primaryUnit",fn:function(t){var n=t.item;return[r("b",[e._v("Primary Unit ")]),e._v(" "+e._s(n.primaryUnit)+" "),r("br"),e._v(" "),r("b",[e._v("Price ")]),e._v(" : "+e._s(n.primaryUnitPrice)+"\n        ")]}},{key:"item.secondaryUnit",fn:function(t){var n=t.item;return[r("b",[e._v("Secondary Unit ")]),e._v(" "+e._s(n.secondaryUnit)+" "),r("br"),e._v(" "),r("b",[e._v("Price ")]),e._v(" : "+e._s(n.secondaryUnitPrice)+"\n        ")]}},{key:"item.status",fn:function(t){var n=t.item;return["INACTIVE"==n.status?r("v-badge",{attrs:{dot:"",inline:"",left:"",color:"#FF0000"}},[e._v("\n            "+e._s(n.status)+"\n          ")]):r("v-badge",{attrs:{dot:"",inline:"",color:"#00ff00",left:""}},[e._v("\n            "+e._s(n.status))])]}},{key:"item.actions",fn:function(t){var n=t.item;return[r("v-btn",{attrs:{color:"primary",small:""},on:{click:function(t){return e.editItem(n)}}},[r("v-icon",{staticClass:"mr-1",attrs:{small:"",color:"white"}},[e._v("mdi-eye ")]),e._v(" View\n          ")],1)]}}],null,!0)})],1)])],1)}),[],!1,null,null,null);t.default=component.exports;f()(component,{VAvatar:h.a,VBadge:y.a,VBtn:I.a,VCard:_.a,VCardText:x.b,VCol:C.a,VContainer:P.a,VDataTable:U.a,VDialog:D.a,VDivider:w.a,VForm:k.a,VIcon:O.a,VImg:j.a,VRow:$.a,VSelect:S.a,VSpacer:F.a,VTextField:V.a})}}]);